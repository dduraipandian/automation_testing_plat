{% extends 'base/admin_base.html' %}
{% load static %}
{% block meta %}
    <title> Testarea Automata - Home </title>
    <meta name="description" content="Testarea Automata user profile">
{% endblock %}

{% block content %}
    {% if messages %}
        <div class="row justify-content-center">
            <div class="col-11">
                    <div id="messages" class="row justify-content-start">
                        {% for message in messages %}
                            <div class="col-12 alert alert-{{ message.tags }} fade in show mt-5" role="alert">
                                <span style="min-width: 17rem; display: inline-block; max-width: 100%;">{{ message }}</span>
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                            </div>
                        {% endfor %}
                    </div>
            </div>
        </div>
    {% endif %}
    <div class="row justify-content-end px-5 mt-3">
        <div class="col-auto">
            <button type="button" class="btn btn-info btn-sm"
                        onclick="window.location.href='/admin/article/new/'">
                    <svg class="bi bi-file-earmark-plus" style="vertical-align: middle;" width="1.3rem" height="1.3rem" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 1H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h5v-1H4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h5v2.5A1.5 1.5 0 0 0 10.5 6H13v2h1V6L9 1z"/>
                      <path fill-rule="evenodd" d="M13.5 10a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"/>
                      <path fill-rule="evenodd" d="M13 12.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0v-2z"/>
                    </svg>
                    <span> New Article </span>
                </button>
        </div>
    </div>
    {% with path=request.path %}
        {% if '/article/new/' in path or '/admin/article/new/article_info/' in path %}
            {% include 'components/new_article.html' with path=path article=article %}
        {% elif '/admin/article/' in path %}
            {% include 'components/all_articles.html' with articles=articles %}
        {% endif %}
    {% endwith %}
{% endblock %}

{% block javascript %}
    <script>
        $('#deleteConfirmation').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget); // Button that triggered the modal
            var id = button.data('id'); // Extract info from data-* attributes
            var title = button.data('title'); // Extract info from data-* attributes
            var modal = $(this);
            var html = `<p>Please confirm to delete article <u class='text-muted'>${title}</u>?</p>
                        <p class='text-danger'>This action is not recoverable.</p>`;
            modal.find('.modal-body').html(html);
            modal.find('#article_id').val(id);
            modal.find('.submit').click(() => event.preventDefault());
        })
    </script>
{% endblock %}